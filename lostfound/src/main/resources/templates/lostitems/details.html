<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Item Details</title>
    <style>
        .wrap { max-width: 900px; margin: 20px auto; }
        .card { border:1px solid #000; padding:16px; border-radius:12px; }
        .badges { display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px; }
        .badge {
            padding:2px 10px;
            border:1px solid #000;
            border-radius:999px;
            font-size:12px;
            display:inline-block;
            font-weight:bold;
        }

        .open { color:#0a7a0a; border-color:#0a7a0a; }
        .resolved { color:#b00020; border-color:#b00020; }

        img { width:100%; max-height:320px; object-fit:cover; border-radius:10px; border:1px solid #000; }
        .muted { opacity:0.75; font-size: 13px; }
        .row { margin: 6px 0; }
        .top { display:flex; align-items:center; gap:12px; margin-bottom:14px; }
        .top a { text-decoration:none; font-weight:bold; }
    </style>
</head>
<body>

<div class="wrap">

    <div class="top">
        <a th:href="@{/home}">‚Üê Back to Home</a>
        <div style="margin-left:auto;"></div>
        <form th:action="@{/logout}" method="post" style="display:inline;">
            <button type="submit">Logout</button>
        </form>
    </div>

    <div class="card">
        <div class="badges">
            <span class="badge" th:text="${item.type}"></span>

            <span class="badge"
                  th:text="${item.status}"
                  th:classappend="${item.status != null && item.status.name() == 'OPEN'} ? 'open' : 'resolved'"></span>
        </div>

        <h2 th:text="${item.title}" style="margin: 8px 0;"></h2>

        <div class="muted">
            <div class="row" th:text="'Location: ' + (item.location != null ? item.location : 'N/A')"></div>
            <div class="row" th:text="'Posted: ' + ${item.createdAt}"></div>
            <div class="row" th:text="'By: ' + (item.user != null ? item.user.username : 'N/A')"></div>
        </div>

        <hr/>

        <div class="row">
            <b>Description:</b>
            <div th:text="${item.description != null ? item.description : 'No description'}"></div>
        </div>

        <hr/>

        <div class="row">
            <b>Contact Email:</b>
            <span th:text="${item.contactEmail != null ? item.contactEmail : 'N/A'}"></span>
        </div>

        <div class="row">
            <b>Contact Phone:</b>
            <span th:text="${item.contactPhone != null ? item.contactPhone : 'N/A'}"></span>
        </div>

        <div style="margin-top:12px;">
            <img th:if="${item.imagePath}" th:src="${item.imagePath}" alt="item image"/>
            <div th:if="${item.imagePath == null}" class="muted">No image</div>
        </div>
    </div>

</div>

</body>
</html>
